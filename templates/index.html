<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ğŸ“ ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ</title>
  <style>
    body { font-family: sans-serif; margin: 20px; background: #f0f0f0; }
    h1 { color: #333; }
    .section { background: #fff; padding: 20px; margin-bottom: 30px; border-radius: 8px; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
    label { display: block; margin-top: 10px; }
    button { margin-top: 10px; padding: 8px 16px; }
  </style>
</head>
<body>

  <h1>ğŸ“ ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ</h1>

  <div class="section">
  <form action="/" method="post" enctype="multipart/form-data">
    <label>CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦è¡¨ç¤º:</label>
    <input type="file" name="file">
    <button type="submit">ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦è¡¨ç¤º</button>
  </form>
  </div>

  <div class="section">
    <h2>ğŸ“‚ ä¿å­˜æ¸ˆã¿ãƒ•ã‚¡ã‚¤ãƒ«</h2>
    {% if files %}
      <ul>
        {% for file in files %}
          <li>
            {{ file }}
            <form action="/" method="post" style="display:inline;">
              <input type="hidden" name="delete" value="{{ file }}">
              <button type="submit">å‰Šé™¤</button>
            </form>
            <form action="/graph" method="get" style="display:inline;">
            <input type="hidden" name="file" value="{{ file }}">
            <button type="submit">ã‚°ãƒ©ãƒ•è¡¨ç¤º</button>
            </form>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
    {% endif %}
  </div>

  <div class="section">
    <h2>ğŸ“ˆ éŠ˜æŸ„é¸æŠï¼ˆæœ€æ–°ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰</h2>
    {% if symbols %}
      <form action="/graph" method="get">
        <input type="hidden" name="file" value="{{ files[0] }}">
        {% for symbol in symbols %}
          <input type="checkbox" name="symbol" value="{{ symbol }}" checked> {{ symbol }}
        {% endfor %}
        <br><br>
        <label>é–‹å§‹æ—¥:</label>
        <input type="date" name="start">
        <label>çµ‚äº†æ—¥:</label>
        <input type="date" name="end">

        <label>ãƒãƒ£ãƒ¼ãƒˆç¨®é¡:</label>
        <select name="chart">
          <option value="line">æŠ˜ã‚Œç·š</option>
          <option value="bar">æ£’ã‚°ãƒ©ãƒ•</option>
          <option value="scatter">æ•£å¸ƒå›³</option>
        </select>
        <!-- â­ï¸ ã“ã“ã«è¿½åŠ ï¼ -->
        <div class="form-group mt-2">
        <label><input type="checkbox" name="use_rsi" checked> RSIã‚’ä½¿ç”¨</label><br>
        <label><input type="checkbox" name="use_macd" checked> MACDã‚’ä½¿ç”¨</label>
        </div>
        <!-- âœ… ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ¡ä»¶è¿½åŠ  -->
        <label>ä¾¡æ ¼ä¸‹é™:</label>
        <input type="number" name="price_min" step="0.01">
        <label>ä¾¡æ ¼ä¸Šé™:</label>
        <input type="number" name="price_max" step="0.01">
        <label>ã‚¢ã‚¯ã‚·ãƒ§ãƒ³:</label>
        <select name="action">
          <option value="">ã™ã¹ã¦</option>
          <option value="buy">è²·ã„</option>
          <option value="sell">å£²ã‚Š</option>
        </select>

        <br>
        <button type="submit">ğŸ“Š ã‚°ãƒ©ãƒ•è¡¨ç¤º</button>
      </form>
    {% else %}
      <p>éŠ˜æŸ„æƒ…å ±ãŒã¾ã èª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>
    {% endif %}
  </div>

</body>
</html>
